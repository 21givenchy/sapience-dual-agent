{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ADMIN/Downloads/sapience-dual-agent/src/agents/forecasting-agent.ts"],"sourcesContent":["import 'dotenv/config';\r\nimport Groq from 'groq-sdk';\r\nimport { gql, GraphQLClient } from 'graphql-request';\r\nimport { SAPIENCE_CONFIG } from '../config';\r\n\r\n// Sapience GraphQL endpoint\r\nconst SAPIENCE_GRAPHQL_URL = 'https://api.sapience.xyz/graphql';\r\nconst graphqlClient = new GraphQLClient(SAPIENCE_GRAPHQL_URL);\r\n\r\ninterface Condition {\r\n  id: string;\r\n  question: string;\r\n  shortName?: string;\r\n  endTime: number;\r\n}\r\n\r\ninterface Forecast {\r\n  conditionId: string;\r\n  probability: number;\r\n  reasoning: string;\r\n}\r\n\r\ninterface ForecastWithConfidence extends Forecast {\r\n  confidence: number;\r\n  edge: number; // Absolute difference from 50% (market uncertainty)\r\n}\r\n\r\ninterface Config {\r\n  privateKey: string;\r\n  groqApiKey: string;\r\n}\r\n\r\nexport class ForecastingAgent {\r\n  private groq: Groq;\r\n  private privateKey: string;\r\n\r\n  constructor(config: Config) {\r\n    this.groq = new Groq({ apiKey: config.groqApiKey });\r\n    this.privateKey = config.privateKey.startsWith('0x') ? config.privateKey : `0x${config.privateKey}`;\r\n  }\r\n\r\n  async getConditions(limit: number = 20): Promise<Condition[]> {\r\n    const nowSec = Math.floor(Date.now() / 1000);\r\n    const query = gql`\r\n      query Conditions($nowSec: Int, $limit: Int) {\r\n        conditions(\r\n          where: { \r\n            public: { equals: true }\r\n            endTime: { gt: $nowSec }\r\n          }\r\n          take: $limit\r\n        ) {\r\n          id\r\n          question\r\n          shortName\r\n          endTime\r\n        }\r\n      }\r\n    `;\r\n    \r\n    const { conditions } = await graphqlClient.request<{ conditions: any[] }>(query, {\r\n      nowSec,\r\n      limit,\r\n    });\r\n\r\n    console.log(`‚úÖ Fetched ${conditions.length} active conditions`);\r\n    \r\n    return conditions;\r\n  }\r\n\r\n  async generateForecast(condition: Condition): Promise<ForecastWithConfidence> {\r\n    const question = condition.shortName || condition.question;\r\n    console.log(`\\nü§ñ Forecasting: ${question.substring(0, 80)}...`);\r\n\r\n    const response = await this.groq.chat.completions.create({\r\n      messages: [{\r\n        role: 'system',\r\n        content: `You are a professional forecaster. Analyze prediction markets using:\r\n1. Base-rate analysis (historical precedent)\r\n2. Conditional probabilities \r\n3. Specific quantitative evidence\r\n4. Market structure/liquidity analysis\r\n5. Bayesian reasoning\r\n\r\nFormat: [probability]% | confidence:[0-100] | [reasoning with specific numbers and logic]`\r\n      }, {\r\n        role: 'user',\r\n        content: `Forecast this binary outcome (0-100%): \"${question}\"\r\n\r\nProvide:\r\n- Probability estimate (0-100)\r\n- Confidence score (0-100) - how certain you are based on available evidence\r\n- Base rates from similar historical events with specific percentages\r\n- Key conditional factors with quantitative estimates\r\n- Specific numerical justifications (e.g., \"Historical rate: 23%, adjusted +15% for X factor\")\r\n- Market inefficiency analysis if applicable\r\n\r\nFormat: [probability]% | confidence:[score] | [reasoning]\r\nKeep reasoning under 280 chars but be specific with numbers.`\r\n      }],\r\n      model: SAPIENCE_CONFIG.GROQ_MODEL,\r\n      temperature: SAPIENCE_CONFIG.GROQ_TEMPERATURE,\r\n      max_tokens: SAPIENCE_CONFIG.GROQ_MAX_TOKENS,\r\n    });\r\n\r\n    const content = response.choices[0]?.message?.content?.trim() || '';\r\n    \r\n    // Extract probability\r\n    const probMatch = content.match(/(\\d{1,3})%/);\r\n    const probability = probMatch ? Math.max(0, Math.min(100, parseInt(probMatch[1]))) : 50;\r\n    \r\n    // Extract confidence score\r\n    const confMatch = content.match(/confidence:\\s*(\\d{1,3})/i);\r\n    const confidence = confMatch ? Math.max(0, Math.min(100, parseInt(confMatch[1]))) : 50;\r\n    \r\n    // Extract reasoning (remove probability and confidence)\r\n    const reasoning = content\r\n      .replace(/^\\d{1,3}%\\s*\\|?\\s*/, '') // Remove leading \"XX% |\"\r\n      .replace(/confidence:\\s*\\d{1,3}\\s*\\|?\\s*/i, '') // Remove confidence score\r\n      .trim()\r\n      .substring(0, 280); // Leave room for encoding\r\n\r\n    console.log(`   Probability: ${probability}%`);\r\n    console.log(`   Confidence: ${confidence}%`);\r\n    console.log(`   Reasoning: ${reasoning}`);\r\n\r\n    // Calculate edge (distance from 50% = strength of conviction)\r\n    const edge = Math.abs(probability - 50);\r\n\r\n    return {\r\n      conditionId: condition.id,\r\n      probability,\r\n      confidence,\r\n      edge,\r\n      reasoning: reasoning || `Base rate ${probability}% from similar historical outcomes`,\r\n    };\r\n  }\r\n\r\n  async submitForecastToSapience(forecast: Forecast): Promise<string> {\r\n    console.log(`üì§ Submitting ${forecast.probability}% ‚Üí ${forecast.conditionId.slice(0, 10)}...`);\r\n    \r\n    try {\r\n      // Use viem directly instead of @sapience/sdk\r\n      const { createWalletClient, http, encodeAbiParameters, encodeFunctionData, parseAbiParameters } = await import('viem');\r\n      const { arbitrum } = await import('viem/chains');\r\n      const { privateKeyToAccount } = await import('viem/accounts');\r\n      \r\n      // EAS contract address on Arbitrum\r\n      const EAS_ADDRESS = '0xbD75f629A22Dc1ceD33dDA0b68c546A1c035c458';\r\n      const SCHEMA_ID = '0x7df55bcec6eb3b17b25c503cc318a36d33b0a9bbc2d6bc0d9788f9bd61980d49';\r\n      \r\n      // Create wallet client\r\n      const account = privateKeyToAccount(this.privateKey as `0x${string}`);\r\n      const client = createWalletClient({\r\n        account,\r\n        chain: arbitrum,\r\n        transport: http('https://arb1.arbitrum.io/rpc'),\r\n      });\r\n      \r\n      // Encode the attestation data\r\n      const encodedData = encodeAbiParameters(\r\n        parseAbiParameters('address resolver, bytes condition, uint256 forecast, string comment'),\r\n        [\r\n          '0x0000000000000000000000000000000000000000', // resolver (zero address)\r\n          forecast.conditionId as `0x${string}`, // condition as bytes32\r\n          BigInt(forecast.probability) * BigInt(10 ** 18), // Convert to D18 format\r\n          forecast.reasoning\r\n        ]\r\n      );\r\n\r\n      // Build EAS attest call\r\n      const attestationData = encodeFunctionData({\r\n        abi: [{\r\n          name: 'attest',\r\n          type: 'function',\r\n          inputs: [{\r\n            name: 'request',\r\n            type: 'tuple',\r\n            components: [\r\n              { name: 'schema', type: 'bytes32' },\r\n              {\r\n                name: 'data',\r\n                type: 'tuple',\r\n                components: [\r\n                  { name: 'recipient', type: 'address' },\r\n                  { name: 'expirationTime', type: 'uint64' },\r\n                  { name: 'revocable', type: 'bool' },\r\n                  { name: 'refUID', type: 'bytes32' },\r\n                  { name: 'data', type: 'bytes' },\r\n                  { name: 'value', type: 'uint256' },\r\n                ],\r\n              },\r\n            ],\r\n          }],\r\n          outputs: [{ name: '', type: 'bytes32' }],\r\n          stateMutability: 'payable',\r\n        }],\r\n        functionName: 'attest',\r\n        args: [{\r\n          schema: SCHEMA_ID,\r\n          data: {\r\n            recipient: '0x0000000000000000000000000000000000000000',\r\n            expirationTime: 0n,\r\n            revocable: false,\r\n            refUID: '0x0000000000000000000000000000000000000000000000000000000000000000',\r\n            data: encodedData,\r\n            value: 0n,\r\n          },\r\n        }],\r\n      });\r\n\r\n      // Submit the transaction\r\n      const hash = await client.sendTransaction({\r\n        to: EAS_ADDRESS as `0x${string}`,\r\n        data: attestationData as `0x${string}`,\r\n        value: 0n,\r\n      });\r\n\r\n      console.log(`‚úÖ TX: https://arbiscan.io/tx/${hash}`);\r\n      return hash;\r\n    } catch (error: any) {\r\n      console.error(`‚ùå Attestation failed: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // ONE-SHOT: 5 forecasts max (your gas budget)\r\n  async runOneShot(): Promise<void> {\r\n    console.log(\"üöÄ ONE-SHOT MODE: 5 forecasts for leaderboard\");\r\n    \r\n    const conditions = await this.getConditions(20);\r\n    if (conditions.length === 0) throw new Error('No conditions');\r\n\r\n    // Pick 5 random long-horizon conditions (better Brier scores)\r\n    const longHorizon = conditions\r\n      .filter(c => c.endTime > Date.now() / 1000 + 7 * 86400) // >7 days\r\n      .sort(() => Math.random() - 0.5)\r\n      .slice(0, 5);\r\n\r\n    let success = 0;\r\n    for (const condition of longHorizon) {\r\n      try {\r\n        const forecast = await this.generateForecast(condition);\r\n        await this.submitForecastToSapience(forecast);\r\n        success++;\r\n        \r\n        // Gas-saving delay\r\n        await new Promise(r => setTimeout(r, 5000));\r\n      } catch (e) {\r\n        console.error(`‚ùå Skip: ${e}`);\r\n      }\r\n    }\r\n\r\n    console.log(`\\nüéâ COMPLETE: ${success}/5 forecasts submitted`);\r\n    console.log(`üìä Check: https://sapience.xyz/leaderboard#accuracy`);\r\n  }\r\n\r\n  /**\r\n   * Main forecasting loop - generates forecasts and submits the most confident one\r\n   */\r\n  async run(maxForecasts: number = 2): Promise<void> {\r\n    console.log(\"ü§ñ Forecasting Agent Starting...\");\r\n    console.log(`üìä Strategy: Submit ${maxForecasts} forecasts (1 highest confidence + 1 highest edge)\\n`);\r\n\r\n    try {\r\n      // Fetch active conditions\r\n      const conditions = await this.getConditions(50);\r\n      \r\n      if (conditions.length === 0) {\r\n        console.log('‚ö†Ô∏è  No active conditions found');\r\n        return;\r\n      }\r\n\r\n      console.log(`\\nüìà Found ${conditions.length} active conditions`);\r\n\r\n      // Generate forecasts for ALL conditions to find the best ones\r\n      console.log('\\nüîç Evaluating all conditions...\\n');\r\n      \r\n      const allForecasts: ForecastWithConfidence[] = [];\r\n      \r\n      for (const condition of conditions) {\r\n        try {\r\n          const forecast = await this.generateForecast(condition);\r\n          allForecasts.push(forecast);\r\n          \r\n          // Rate limiting between API calls\r\n          await new Promise((resolve) => setTimeout(resolve, 1500));\r\n        } catch (error) {\r\n          console.error(`  ‚ö†Ô∏è  Skipped condition: ${error}`);\r\n          continue;\r\n        }\r\n      }\r\n\r\n      if (allForecasts.length === 0) {\r\n        console.log('‚ùå No forecasts generated');\r\n        return;\r\n      }\r\n\r\n      // Strategy: Pick 1 highest confidence + 1 highest edge (different forecasts)\r\n      const byConfidence = [...allForecasts].sort((a, b) => b.confidence - a.confidence);\r\n      const byEdge = [...allForecasts].sort((a, b) => b.edge - a.edge);\r\n      \r\n      const selectedForecasts: ForecastWithConfidence[] = [];\r\n      \r\n      // Add highest confidence forecast\r\n      if (byConfidence.length > 0) {\r\n        selectedForecasts.push(byConfidence[0]);\r\n      }\r\n      \r\n      // Add highest edge forecast (if different from highest confidence)\r\n      if (byEdge.length > 0 && byEdge[0].conditionId !== byConfidence[0]?.conditionId) {\r\n        selectedForecasts.push(byEdge[0]);\r\n      } else if (byConfidence.length > 1) {\r\n        // If same forecast, add second highest confidence\r\n        selectedForecasts.push(byConfidence[1]);\r\n      }\r\n\r\n      // Limit to maxForecasts\r\n      const finalForecasts = selectedForecasts.slice(0, maxForecasts);\r\n      \r\n      console.log(`\\nüìä Generated ${allForecasts.length} forecasts`);\r\n      console.log(`\\nüéØ Selected ${finalForecasts.length} for submission:`);\r\n      finalForecasts.forEach((f, i) => {\r\n        const question = conditions.find(c => c.id === f.conditionId)?.shortName || 'Unknown';\r\n        console.log(`   ${i + 1}. ${question.substring(0, 50)}`);\r\n        console.log(`      Probability: ${f.probability}% | Confidence: ${f.confidence}% | Edge: ${f.edge.toFixed(1)}%`);\r\n      });\r\n      \r\n      console.log(`\\nüì§ Submitting ${finalForecasts.length} forecast(s)...\\n`);\r\n\r\n      let successCount = 0;\r\n      let failCount = 0;\r\n      let totalGasCost = 0;\r\n\r\n      for (const forecast of finalForecasts) {\r\n        try {\r\n          const question = conditions.find(c => c.id === forecast.conditionId)?.shortName || 'Unknown';\r\n          console.log(`\\nüéØ ${question.substring(0, 60)}`);\r\n          console.log(`   ${forecast.probability}% (confidence: ${forecast.confidence}%, edge: ${forecast.edge.toFixed(1)}%)`);\r\n          \r\n          await this.submitForecastToSapience(forecast);\r\n          successCount++;\r\n          totalGasCost += 0.0015; // Approximate gas cost per tx\r\n\r\n          // Rate limiting between transactions\r\n          await new Promise((resolve) => setTimeout(resolve, 3000));\r\n        } catch (error) {\r\n          console.error(`  ‚ùå Submission failed: ${error}`);\r\n          failCount++;\r\n          continue;\r\n        }\r\n      }\r\n\r\n      console.log(`\\n‚ú® Forecasting complete!`);\r\n      console.log(`  üìä Successful: ${successCount}/${finalForecasts.length}`);\r\n      if (failCount > 0) {\r\n        console.log(`  ‚ùå Failed: ${failCount}/${finalForecasts.length}`);\r\n      }\r\n      console.log(`  ‚õΩ Estimated gas cost: ~$${(totalGasCost * 3000).toFixed(2)} (at $3000/ETH)`);\r\n      console.log(`  üìç View results: https://sapience.xyz/leaderboard#accuracy`);\r\n    } catch (error) {\r\n      console.error(\"Fatal error:\", error);\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}